<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dolce&Gabbana VTO ✨</title>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/record-style.css" />

</head>

<body>
  <div id="container-9-16">
    <div id="flip" class="reverse-cam"><img id="reverse-cam" width='0' height="0" src="assets/reverse-cam.png" alt=""></div>
    <div id="intro-bg">
      <div id="intro-card">
        <img id="intro-logo" src="assets/logo.png" alt="">
        <div id="intro-text-1" class="intro-text">
          VIRTUAL TRY ON<br><br>
          <span class="lg-en"> Discover your iconic look in real time</span>
          <span class="lg-it"> Scopri il tuo look iconico in tempo reale</span>
          <br><br>
        </div>
        <div id="intro-text-2" class="intro-text">
          <span class="lg-en"> To personalize your experience, we’ll access your device camera. </span>
          <span class="lg-it"> Per personalizzare l'esperienza, dai accesso alla fotocamera del tuo dispositivo. </span>
          <br><br>
          <span class="lg-en"> Your image will only be used to display<br> the selected look, it won’t be saved or shared.</span>
          <span class="lg-it"> La tua immagine verrà utilizzata esclusivamente per visualizzare il look selezionato, non verrà salvata o condivisa</span>

          <br><br>
        </div>
        <div id="intro-spacer"></div>

        <div id="intro-buttons">
          <button class="button-1" id="btn-agree" role="button">
            <span class="lg-en"> Agree and Proceed</span>
            <span class="lg-it"> Accetta e Procedi</span>
          </button>
          <button class="button-1" id="btn-cancel" role="button">
            <span class="lg-en"> Cancel </span>
            <span class="lg-it"> Annulla </span>
          </button>

        </div>
        <div id="intro-text-3" class="intro-text">
          <span class="lg-en"> By continuing, you confirm you are at least 16 years old and accept our  <a href="https://world.dolcegabbana.com/privacy" style="color: black; text-decoration: underline;">Privacy Policy</a>.</span>
          <span class="lg-it"> Continuando, confermi di avere almeno 16 anni e accetti la nostra <a href="https://world.dolcegabbana.com/it/privacy" style="color: black; text-decoration: underline;">Politica sulla Privacy</a>.</span>
          <br><br>
        </div>
      </div>


      <script>
        // Function to get URL parameters
        function getUrlParameter(name) {
          const params = new URLSearchParams(window.location.search);
          return params.get(name);
        }

        // Get the language from URL param or default to 'en'
        const lang = getUrlParameter('lg') || 'en';

        // Select all elements with class lg-en or lg-it
        const langElements = document.querySelectorAll('.lg-en, .lg-it');

        langElements.forEach(el => {
          // If the element's class matches the lang, show it
          if (el.classList.contains(`lg-${lang}`)) {
            el.style.display = '';
          } else {
            // Otherwise, hide it
            el.style.display = 'none';
          }
        });
      </script>



      <!-- HTML !-->
    </div>
    <div id="ui-capture">
      <div id="btn-cross" class="btn-capture"><img src="assets/btn_cross.png" alt=""></div>
      <div id="btn-back" class="btn-capture"><img src="assets/btn_back.png" alt=""></div>
      <div id="flash-overlay"></div>
      <div id="btn-download" class="btn-capture"><img src="assets/btn_download.png" alt=""></div>
      <div id="ui-countdown" class="ui-countdowns">
        <div id="countdown">
          <span class="countdown-number"></span>
          <svg class="countdown-circle" viewBox="0 0 40 40">
            <circle class="static-circle" cx="20" cy="20" r="18" />
            <circle cx="20" cy="20" r="18"></circle>
          </svg>
        </div>
      </div>
    </div>

    <!-- Capture Section -->
    <div id="canvas-part" class="canvas-part">
      <!-- Progress Bar -->
      <div class="progress-bar" id="progressBar"></div>
      <!-- Canvas -->
      <!-- <canvas id="canvas" class="active"></canvas> -->
      <!-- <canvas id="capture-canvas" class="active"></canvas> -->

      <!-- Capture Button with SVG -->
    </div>

    <div class="capture-btn" id="captureButton" style="display: none;">
      <svg id="progressRing" class="progress-ring" xmlns="http://www.w3.org/2000/svg">
        <circle class="outer-circle" stroke="rgba(255, 255, 255,0.9)" stroke-width="3" fill="none" />
        <circle class="progress-ring__circle" stroke="rgb(255, 255, 255)" stroke-width="3" fill="none" />
        <circle class="inner-circle" fill="rgba(255, 255, 255,0.9)" />
      </svg>
    </div>

    <!-- Preview Section -->
    <div id="container" class="container">
      <section id="preview-part" class="preview-part">
        <img src="assets/spin.gif" alt="loading" class="spin-loading" style="display: none" />
        <div class="preview">
          <!-- Video Progress Bar -->
          <div class="progress-parent">
            <div class="video-progress-bar-sudo">
              <div class="video-progress-bar" id="videoProgressBar"></div>
            </div>
          </div>
          <!-- Preview Image or Canvas -->
          <img src="" alt="Preview Image" id="preview-img" class="preview-img" />
          <canvas id="videoCanvas" class="video-canvas"></canvas>
        </div>
        <!-- Control Bar -->
        <div class="controls">
          <!-- Back Button -->
          <img src="assets/back.png" alt="Back" class="back-btn" id="backButton" />
          <!-- Action Button will be dynamically added here -->
        </div>
      </section>


    </div>

    <div class="poweredbysnap-logo">
      <img id="image" src="./assets/Powered_bysnap.png" alt="Powered by Snap">
    </div>
  </div>
  <!-- External Scripts -->


  <script>
    // function isMobileDevice() {
    //   return /Mobi|Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    // }

    // if (!isMobileDevice()) {
    //   Object.defineProperty(window, 'innerWidth', {
    //     configurable: true,
    //     get: function () {
    //       return 720;  // simulate max width 700px
    //     }
    //   });
    // }

    // if (!isMobileDevice()) {
    // const targetWidth = 720;
    // const targetHeight = Math.round(targetWidth * (16 / 9));; // For 16:9 landscape, this is backwards—see note below

    // Clarification: For 16:9 LANDSCAPE, you want width: 16, height: 9, so:
    // const targetHeight = Math.round(targetWidth * (9 / 16));
    // For 9:16 PORTRAIT, you want width: 9, height: 16, so:
    // const targetHeight = Math.round(targetWidth * (16 / 9));

    // Enforce the ratio by overriding both properties
    // Object.defineProperty(window, 'innerWidth', {
    //   configurable: true,
    //   get: function () { return targetWidth; }
    // });
    // Object.defineProperty(window, 'innerHeight', {
    //   configurable: true,
    //   get: function () { return targetHeight; }
    // });
    // }
  </script>

  <script src="./lensID.js"></script>
  <script src="./packed.js"></script>
  <script src="js/resizeSvg.js"></script>

  <!-- <script src="js/recordAPI.js"></script> -->
  <!-- <script src="js/recordScript.js"></script> -->

</body>

</html>